{"remainingRequest":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\babel-loader\\lib\\index.js??ref--1-1!C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\src\\pages\\Search\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\src\\pages\\Search\\Index.vue","mtime":1725521740109},{"path":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1725826210235},{"path":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\babel-loader\\lib\\index.js","mtime":1725826212301},{"path":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1725826210235},{"path":"C:\\Users\\Oluwaseun Olowu\\Desktop\\njtd_site_update\\node_modules\\vue-loader\\lib\\index.js","mtime":1725827904240}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.push.js\";\nimport ArticleCard from '~/components/ArticleCard';\nimport Pagination from '~/components/Pagination';\nexport default {\n  name: 'an_issue',\n  components: {\n    ArticleCard,\n    Pagination\n  },\n  mounted() {\n    this.internalQuery = this.query;\n    this.search();\n  },\n  data() {\n    return {\n      loading: true,\n      results: [],\n      internalQuery: '',\n      page: 1,\n      offset: 0,\n      maxPages: 0,\n      maxItems: 0\n    };\n  },\n  computed: {\n    query() {\n      return this.$route.query.q;\n    },\n    articles() {\n      let articles = [];\n      this.results.forEach(article => {\n        articles.push(...article.publications);\n      });\n      return articles;\n    }\n  },\n  watch: {\n    page(pg) {\n      this.search();\n    }\n  },\n  methods: {\n    async search() {\n      try {\n        this.loading = true;\n        let res = await this.$http.get(`submissions?searchPhrase=${this.internalQuery}&offset=${this.offset}`);\n        this.maxItems = res.itemsMax;\n        this.maxPages = Math.ceil(res.itemsMax / 20);\n        this.results = res.items;\n        this.loading = false;\n      } catch (E) {\n        // TODO Take off the console log\n        console.log(E);\n      }\n    },\n    back() {\n      if (this.page > 1) {\n        this.offset -= 20;\n        --this.page;\n      }\n    },\n    next() {\n      if (this.page < this.maxPages) {\n        this.offset += 20;\n        ++this.page;\n      }\n    }\n  }\n};",{"version":3,"names":["ArticleCard","Pagination","name","components","mounted","internalQuery","query","search","data","loading","results","page","offset","maxPages","maxItems","computed","$route","q","articles","forEach","article","push","publications","watch","pg","methods","res","$http","get","itemsMax","Math","ceil","items","E","console","log","back","next"],"sources":["src/pages/Search/Index.vue"],"sourcesContent":["<template>\r\n    <Layout>\r\n        <div>\r\n            <a @click=\"$router.back()\" class=\"cursor-pointer font-medium flex\">\r\n                <span class=\"iconify text-2xl\"\r\n                    data-icon=\"entypo:chevron-small-left\"></span>\r\n                Back\r\n            </a>\r\n        </div>\r\n\r\n        <div class=\"mt-10\">\r\n            <div class=\"my-2\">\r\n                <label class=\"gray-text font-medium\">Search</label>\r\n                <div class=\"mt-1\">\r\n                    <input v-model=\"internalQuery\" class=\"w-full rounded-md py-3 px-3 bg-gray-200 focus:bg-gray-300\"\r\n                        placeholder=\"By Title or Author\" autocomplete=\"autocomplete\" autofocus>\r\n                </div>\r\n            </div>\r\n            <div class=\"flex flex-wrap mt-6 hidden\">\r\n                <div class=\"mr-8 mb-5\">\r\n                    <label class=\"gray-text font-medium\">Published After</label>\r\n                    <div class=\"mt-1\">\r\n                        <input type=\"date\" class=\"bg-gray-200 rounded-md py-2 px-3 focus:bg-gray-300\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"mr-8 mb-5\">\r\n                    <label class=\"gray-text font-medium\">Published Before</label>\r\n                    <div class=\"mt-1\">\r\n                        <input type=\"date\" class=\"bg-gray-200 rounded-md py-2 px-3 focus:bg-gray-300\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"mt-3\">\r\n                <button @click=\"search\" \r\n                    class=\"orange outline-none py-3 px-5 white-text text-sm font-medium rounded-md flex items-center content-center\">\r\n                    Search\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"loading\" class=\"gray-text mt-5\">\r\n            Searching ...\r\n        </div>\r\n\r\n        <section class=\"mt-12\" v-else>\r\n            <h1 class=\"text-2xl font-bold orange-text\">\r\n                Search Results\r\n            </h1>\r\n            <h5 class=\"\">\r\n                {{ maxItems }} Search Results found for '<em class=\"font-semibold\">{{ internalQuery }}</em>'\r\n            </h5>\r\n        \r\n\r\n            <div class=\"mt-8\" v-if=\"articles.length > 0\">\r\n                <div class=\"mb-5 w-full flex items-center justify-end\">\r\n                    <div class=\"mr-2 text-xs\">\r\n                        <div>\r\n                            {{ page }} of {{ maxPages }} page{{ maxPages > 1 ? 's' : '' }} ({{ articles.length }} Items)\r\n                        </div>\r\n                    </div>\r\n                    <Pagination @previous=\"back\" @next=\"next\" />\r\n                </div>\r\n\r\n                <template v-for=\"article in articles\">\r\n                    <ArticleCard :article=\"article\" :key=\"`article_${article.id}`\" /> \r\n                </template>\r\n            </div>\r\n\r\n            <div class=\"mt-8 gray-text text-sm\" v-else>\r\n                No Publication matches your search keyword\r\n            </div>\r\n        </section>\r\n    </Layout>\r\n</template>\r\n\r\n<script>\r\nimport ArticleCard from '~/components/ArticleCard'\r\nimport Pagination from '~/components/Pagination'\r\n\r\nexport default {\r\n    name: 'an_issue',\r\n    components: {\r\n        ArticleCard,\r\n        Pagination\r\n    },\r\n\r\n    mounted () {\r\n        this.internalQuery = this.query\r\n        this.search()\r\n    },\r\n\r\n    data () {\r\n        return {\r\n            loading: true,\r\n            results: [],\r\n            internalQuery: '',\r\n            page: 1,\r\n            offset: 0,\r\n            maxPages: 0,\r\n            maxItems: 0\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        query () {\r\n            return this.$route.query.q\r\n        },\r\n\r\n        articles () {\r\n            let articles = []\r\n            this.results.forEach((article) => {\r\n                articles.push(...article.publications)\r\n            })\r\n            return articles\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        page (pg) {\r\n            this.search()\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        async search () {\r\n            try {\r\n                this.loading = true\r\n                let res = (await this.$http.get(\r\n                    `submissions?searchPhrase=${this.internalQuery}&offset=${this.offset}`\r\n                ))\r\n                this.maxItems = res.itemsMax\r\n                this.maxPages = Math.ceil(res.itemsMax / 20)\r\n                this.results = res.items\r\n                this.loading = false\r\n            } catch (E) {\r\n                // TODO Take off the console log\r\n                console.log(E)\r\n            }\r\n        },\r\n\r\n        back () {\r\n            if (this.page > 1) {\r\n                this.offset -= 20\r\n                --this.page\r\n            }\r\n        },\r\n        \r\n        next () {\r\n            if (this.page < this.maxPages) {\r\n                this.offset += 20\r\n                ++this.page\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nimg {\r\n    height: 120px;\r\n}\r\n</style>"],"mappings":";AA4EA,OAAAA,WAAA;AACA,OAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,WAAA;IACAC;EACA;EAEAG,QAAA;IACA,KAAAC,aAAA,QAAAC,KAAA;IACA,KAAAC,MAAA;EACA;EAEAC,KAAA;IACA;MACAC,OAAA;MACAC,OAAA;MACAL,aAAA;MACAM,IAAA;MACAC,MAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EAEAC,QAAA;IACAT,MAAA;MACA,YAAAU,MAAA,CAAAV,KAAA,CAAAW,CAAA;IACA;IAEAC,SAAA;MACA,IAAAA,QAAA;MACA,KAAAR,OAAA,CAAAS,OAAA,CAAAC,OAAA;QACAF,QAAA,CAAAG,IAAA,IAAAD,OAAA,CAAAE,YAAA;MACA;MACA,OAAAJ,QAAA;IACA;EACA;EAEAK,KAAA;IACAZ,KAAAa,EAAA;MACA,KAAAjB,MAAA;IACA;EACA;EAEAkB,OAAA;IACA,MAAAlB,OAAA;MACA;QACA,KAAAE,OAAA;QACA,IAAAiB,GAAA,cAAAC,KAAA,CAAAC,GAAA,CACA,iCAAAvB,aAAA,gBAAAO,MAAA,EACA;QACA,KAAAE,QAAA,GAAAY,GAAA,CAAAG,QAAA;QACA,KAAAhB,QAAA,GAAAiB,IAAA,CAAAC,IAAA,CAAAL,GAAA,CAAAG,QAAA;QACA,KAAAnB,OAAA,GAAAgB,GAAA,CAAAM,KAAA;QACA,KAAAvB,OAAA;MACA,SAAAwB,CAAA;QACA;QACAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;IACA;IAEAG,KAAA;MACA,SAAAzB,IAAA;QACA,KAAAC,MAAA;QACA,OAAAD,IAAA;MACA;IACA;IAEA0B,KAAA;MACA,SAAA1B,IAAA,QAAAE,QAAA;QACA,KAAAD,MAAA;QACA,OAAAD,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}