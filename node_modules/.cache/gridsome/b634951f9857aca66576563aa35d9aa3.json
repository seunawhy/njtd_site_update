{"remainingRequest":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\babel-loader\\lib\\index.js??ref--1-1!C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\src\\pages\\Paper\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\src\\pages\\Paper\\Index.vue","mtime":1725521740109},{"path":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1725826210235},{"path":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\babel-loader\\lib\\index.js","mtime":1725826212301},{"path":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1725826210235},{"path":"C:\\Users\\Oluwaseun Olowu\\Documents\\Njtd\\njtd_site_new\\node_modules\\vue-loader\\lib\\index.js","mtime":1725826215940}],"contextDependencies":[],"result":["import { mapGetters } from 'vuex';\nexport default {\n  name: 'paper',\n  metaInfo: {\n    title: 'Paper'\n  },\n\n  async mounted() {\n    try {\n      this.article = await this.$http.get(`/submissions/${this.paper.submissionId}/publications/${this.paper.publicationId}`);\n      this.found = true; // Fetch Number of Downloads\n\n      let submissions = await this.$downloadApi.get(`/downloads/${this.article.submissionId}`);\n      this.downloads = submissions.data.count;\n    } catch (E) {\n      if (E.response.status !== 404) {\n        this.$router.push('/');\n      }\n    } finally {\n      this.loading = false;\n    }\n  },\n\n  data() {\n    return {\n      found: false,\n      loading: true,\n      selectedTab: 0,\n      downloads: 0,\n      article: {},\n      tabs: [{\n        name: 'Abstract'\n      }, {\n        name: 'References'\n      }, {\n        name: 'Citations'\n      }, {\n        name: 'Related Articles'\n      }],\n      references: ''\n    };\n  },\n\n  computed: { ...mapGetters({\n      currentIssue: 'currentIssue'\n    }),\n\n    paper() {\n      try {\n        let ids = this.$route.query.paper.split('_');\n        return {\n          submissionId: ids[0],\n          publicationId: ids[1]\n        };\n      } catch (E) {\n        this.$router.push('/');\n      }\n    },\n\n    img() {\n      return this.article.coverImage[this.locale] || 'https://img.icons8.com/fluent/96/000000/journal.png';\n    },\n\n    downloadUrl() {\n      let baseUrl = this.article.urlPublished.replace(/\\/view.+$/, '/download');\n      return `${baseUrl}/${this.article.submissionId}/${this.galley.id}/${this.galley.fileId}`;\n    },\n\n    galley() {\n      return this.article.galleys[0] || {\n        file: {}\n      };\n    },\n\n    locale() {\n      return this.article.locale;\n    },\n\n    volume() {\n      if (this.currentIssue) {\n        return this.article.issueId === this.currentIssue.id ? this.currentIssue.identification : null;\n      }\n\n      return null;\n    }\n\n  },\n  methods: {\n    async recordDownload() {\n      this.downloads++;\n      await this.$downloadApi.put(`/downloads/${this.article.submissionId}`);\n    }\n\n  }\n};",{"version":3,"mappings":"AAmHA;AACA;EACAA,aADA;EAEAC;IACAC;EADA,CAFA;;EAMA;IACA;MACA,oCACA,kFADA;MAGA,kBAJA,CAKA;;MACA;MACA;IACA,CARA,CAQA;MACA;QACA;MACA;IACA,CAZA,SAYA;MACA;IACA;EACA,CAtBA;;EAwBAC;IACA;MACAC,YADA;MAEAC,aAFA;MAGAC,cAHA;MAIAC,YAJA;MAKAC,WALA;MAMAC,OACA;QAAAT;MAAA,CADA,EAEA;QAAAA;MAAA,CAFA,EAGA;QAAAA;MAAA,CAHA,EAIA;QAAAA;MAAA,CAJA,CANA;MAYAU;IAZA;EAcA,CAvCA;;EAyCAC,YACA;MACAC;IADA,EADA;;IAKAC;MACA;QACA;QACA;UACAC,oBADA;UAEAC;QAFA;MAIA,CANA,CAMA;QACA;MACA;IACA,CAfA;;IAiBAC;MACA;IACA,CAnBA;;IAqBAC;MACA;MACA;IACA,CAxBA;;IA0BAC;MACA;QACAC;MADA;IAGA,CA9BA;;IAgCAC;MACA;IACA,CAlCA;;IAoCAC;MACA;QACA;MACA;;MACA;IACA;;EAzCA,CAzCA;EAqFAC;IACA;MACA;MACA;IACA;;EAJA;AArFA","names":["name","metaInfo","title","data","found","loading","selectedTab","downloads","article","tabs","references","computed","currentIssue","paper","submissionId","publicationId","img","downloadUrl","galley","file","locale","volume","methods"],"sourceRoot":"src/pages/Paper","sources":["Index.vue"],"sourcesContent":["<template>\r\n    <Layout>\r\n        <div>\r\n            <a @click=\"$router.back()\" class=\"cursor-pointer font-medium flex\">\r\n                <span class=\"iconify text-2xl\"\r\n                    data-icon=\"entypo:chevron-small-left\"></span>\r\n                Back\r\n            </a>\r\n        </div>\r\n\r\n        <div class=\"gray-text mt-5\" v-if=\"loading\">\r\n            Loading paper ...\r\n        </div>\r\n\r\n        <div v-else-if=\"found\">\r\n            <div class=\"block sm:block md:flex lg:flex justify-start items-start mt-5\">\r\n                <g-image :src=\"img\" responsive class=\"shadow-lg rounded-lg mb-4\" />\r\n\r\n                <div class=\"md:ml-8 lg:ml-8\">\r\n                    <h1 class=\"font-bold text-2xl\">\r\n                        {{ article.fullTitle[locale] }}\r\n                    </h1>\r\n\r\n                    <div class=\"my-2 dark-text font-semibold\">\r\n                        {{ article.datePublished | date }}\r\n                    </div>\r\n\r\n                    <div class=\"my-2\">\r\n                        <span class=\"mr-1\" v-if=\"volume\">{{ volume }}. </span>\r\n                        Page <strong>{{ article.pages }}</strong>\r\n                    </div>\r\n\r\n                    <div class=\"my-2\" v-if=\"!article.hideAuthor\">\r\n                        <span class=\"gray-text\">By</span>\r\n                        {{ article.authorsString }}\r\n                        <!-- E. Ayodele, C. J. Okolie, C. U. Ezeigbo, F. A. Fajemirokun -->\r\n                    </div>\r\n\r\n                    <div class=\"my-3 flex flex-wrap justify-start items-center\">\r\n                        <span v-for=\"keyword in article.keywords[locale]\"\r\n                            :key=\"keyword\"\r\n                            class=\"block py-2 px-4 mb-2 text-xs font-medium rounded-md mr-1 bg-gray-200 capitalize\">\r\n                            {{ keyword }}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <!-- <div class=\"gray-text text-xs mt-5\">\r\n                        {{ article.copyrightHolder[locale] }} &copy; {{ article.copyrightYear }}\r\n                    </div> -->\r\n\r\n                    <div class=\"my-6 flex justify-start items-center\">\r\n                        <a @click=\"recordDownload\" :href=\"downloadUrl\" target=\"_blank\" :download=\"galley.file.fileName\"\r\n                            class=\"py-2 px-4 orange text-sm white-text font-semibold hover:shadow-md rounded-md\">\r\n                            Download\r\n                        </a>\r\n                        <div class=\"ml-2 dark-text\">{{ downloads ?? 0 }} downloads</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"my-10\">\r\n                <section class=\"tabs w-full\">\r\n                    <ul class=\"w-full overflow-auto mb-3\">\r\n                        <li v-for=\"(tab, tx) in tabs\" :key=\"tab.name\"\r\n                            class=\"inline px-2 mx-1\"\r\n                            :class=\"{ selected: selectedTab === tx }\">\r\n                            <a href=\"#\" class=\"inline-block text-lg\"\r\n                                @click=\"selectedTab = tx\">\r\n                                {{ tab.name }}\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <section class=\"px-3 py-2\">\r\n                        <transition name=\"paper-tabs\"\r\n                            enter-active-class=\"animate__animated animate__fadeIn\">\r\n                            <div class=\"paper_excerpt text-justify\" key=\"article\" v-if=\"selectedTab === 0\">\r\n                                <div v-html=\"article.abstract[locale]\"></div>\r\n                            </div>\r\n\r\n                            <!-- Citations Tab -->\r\n                            <div class=\"paper_excerpt\" key=\"references\" v-else-if=\"selectedTab === 1\">\r\n                                <template v-if=\"article.citations.length > 0\">\r\n                                    <div v-for=\"reference in article.citations\"\r\n                                        :key=\"reference\"\r\n                                        class=\"mb-5\"\r\n                                        v-html=\"reference\">\r\n                                    </div>\r\n                                </template>\r\n                                <p v-else class=\"gray-text\">\r\n                                    No references\r\n                                </p>\r\n                            </div>\r\n\r\n                            <!-- References Tab -->\r\n                            <div class=\"paper_excerpt\" key=\"citations\" v-else-if=\"selectedTab === 2\">\r\n                                No Citations\r\n                            </div>\r\n\r\n                            <!-- Related Articles Tab -->\r\n                            <div class=\"paper_excerpt\" key=\"related_articles\" v-else-if=\"selectedTab === 3\">\r\n                                No related articles\r\n                            </div>\r\n                        </transition>\r\n                    </section>\r\n                </section>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"text-lg mt-5 ml-2\" v-else>\r\n            Paper not found\r\n        </div>\r\n    </Layout>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    name: 'paper',\r\n    metaInfo: {\r\n        title: 'Paper'\r\n    },\r\n\r\n    async mounted () {\r\n        try {\r\n            this.article = await this.$http.get(\r\n                `/submissions/${this.paper.submissionId}/publications/${this.paper.publicationId}`\r\n            )\r\n            this.found = true\r\n            // Fetch Number of Downloads\r\n            let submissions = await this.$downloadApi.get(`/downloads/${this.article.submissionId}`)\r\n            this.downloads = submissions.data.count\r\n        } catch (E) {\r\n            if (E.response.status !== 404) {\r\n                this.$router.push('/')\r\n            }\r\n        } finally {\r\n            this.loading = false\r\n        }\r\n    },\r\n\r\n    data () {\r\n        return {\r\n            found: false,\r\n            loading: true,\r\n            selectedTab: 0,\r\n            downloads: 0,\r\n            article: {},\r\n            tabs: [\r\n                { name: 'Abstract' },\r\n                { name: 'References' },\r\n                { name: 'Citations' },\r\n                { name: 'Related Articles' },\r\n            ],\r\n            references: ''\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        ...mapGetters({\r\n            currentIssue: 'currentIssue'\r\n        }),\r\n\r\n        paper () {\r\n            try {\r\n                let ids = this.$route.query.paper.split('_')\r\n                return {\r\n                    submissionId: ids[0],\r\n                    publicationId: ids[1]                \r\n                }\r\n            } catch (E) {\r\n                this.$router.push('/')\r\n            }\r\n        },\r\n\r\n        img () {\r\n            return this.article.coverImage[this.locale] || 'https://img.icons8.com/fluent/96/000000/journal.png'\r\n        },\r\n\r\n        downloadUrl () {\r\n            let baseUrl = this.article.urlPublished.replace(/\\/view.+$/, '/download')\r\n            return `${baseUrl}/${this.article.submissionId}/${this.galley.id}/${this.galley.fileId}`\r\n        },\r\n\r\n        galley () {\r\n            return this.article.galleys[0] || {\r\n                file: {}\r\n            }\r\n        },\r\n\r\n        locale () {\r\n            return this.article.locale\r\n        },\r\n\r\n        volume () {\r\n            if (this.currentIssue) {\r\n                return this.article.issueId === this.currentIssue.id ? this.currentIssue.identification : null\r\n            }\r\n            return null\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        async recordDownload () {\r\n            this.downloads++\r\n            await this.$downloadApi.put(`/downloads/${this.article.submissionId}`)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nh1 {\r\n    line-height: 35px;\r\n}\r\n\r\nul {\r\n    white-space: nowrap;\r\n    // border-bottom: 1px solid #F0F0F0;\r\n\r\n    li {\r\n        position: relative;\r\n        border-bottom: 2px solid transparent;\r\n\r\n        a {\r\n            color: #CCC;\r\n        }\r\n\r\n        &.selected {\r\n            // border-bottom-color: $navy-blue;\r\n\r\n            a {\r\n                color: $orange;\r\n                font-weight: 600;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.paper_excerpt {\r\n    line-height: 25px;\r\n}\r\n</style>"]}]}